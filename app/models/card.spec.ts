import { cardSchema } from "./card";

const successCard = {
  url: "https://example.com",
  text: "text",
  emoji: "ðŸ˜€",
};

describe("cardSchema", () => {
  test.each`
    card                              | expected                          | description
    ${successCard}                    | ${successCard}                    | ${"æ­£ã—ã„å½¢å¼ã®ã‚«ãƒ¼ãƒ‰ã‚’ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹"}
    ${{ url: "http://example.com" }}  | ${{ url: "http://example.com" }}  | ${"httpã®URLã‚’ãƒ‘ãƒ¼ã‚¹ã§åˆ‡ã‚‹"}
    ${{ url: "https://example.com" }} | ${{ url: "https://example.com" }} | ${"httpsã®URLã‚’ãƒ‘ãƒ¼ã‚¹ã§åˆ‡ã‚‹"}
    ${{ url: "" }}                    | ${{ url: "" }}                    | ${"urlã¯ç©ºæ–‡å­—ã§ã‚‚ãƒ‘ãƒ¼ã‚¹æˆåŠŸ"}
    ${{ text: "" }}                   | ${{ text: "" }}                   | ${"textã¯ç©ºæ–‡å­—ã§ã‚‚ãƒ‘ãƒ¼ã‚¹æˆåŠŸ"}
    ${{ emoji: "" }}                  | ${{ emoji: "" }}                  | ${"emojiã¯ç©ºæ–‡å­—ã§ã‚‚ãƒ‘ãƒ¼ã‚¹æˆåŠŸ"}
    ${{ emoji: "ðŸ‘" }}                | ${{ emoji: "ðŸ‘" }}                | ${"å˜ç´”ãªçµµæ–‡å­—ã‚’ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹"}
    ${{ emoji: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦" }}                | ${{ emoji: "ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦" }}                | ${"è¤‡æ•°ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çµµæ–‡å­—ï¼ˆå®¶æ—ï¼‰ã‚’ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹"}
    ${{ emoji: "ðŸ³ï¸â€ðŸŒˆ" }}                | ${{ emoji: "ðŸ³ï¸â€ðŸŒˆ" }}                | ${"è¤‡æ•°ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çµµæ–‡å­—ï¼ˆè™¹è‰²ã®æ——ï¼‰ã‚’ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹"}
    ${{ emoji: "ðŸ‘¨ðŸ¿â€ðŸ’»" }}                | ${{ emoji: "ðŸ‘¨ðŸ¿â€ðŸ’»" }}                | ${"è‚Œè‰²ä¿®é£¾å­ä»˜ãçµµæ–‡å­—ã‚’ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹"}
  `("$description", ({ card, expected }) => {
    expect(cardSchema.safeParse(card).data).toEqual(expected);
  });
  test.each`
    card                                     | description
    ${{ url: "mailto:example@example.com" }} | ${"http(s)ä»¥å¤–ã®URLã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
    ${{ emoji: "emoji" }}                    | ${"æœ‰åŠ¹ãªçµµæ–‡å­—ä»¥å¤–ã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
    ${{ emoji: "fooðŸ‘" }}                    | ${"æœ‰åŠ¹ãªçµµæ–‡å­—ãŒã‚ã£ã¦ã‚‚2æ–‡å­—ä»¥ä¸Šã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—(å‰)"}
    ${{ emoji: "ðŸ‘foo" }}                    | ${"æœ‰åŠ¹ãªçµµæ–‡å­—ãŒã‚ã£ã¦ã‚‚2æ–‡å­—ä»¥ä¸Šã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—(å¾Œ)"}
    ${{ emoji: "ðŸ˜€ðŸ˜€" }}                     | ${"2æ–‡å­—ã®çµµæ–‡å­—ã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
    ${{ emoji: "ðŸ‘ðŸ»ðŸ‘ðŸ»" }}                     | ${"2æ–‡å­—ã®çµµæ–‡å­—ï¼ˆè‚Œè‰²ä¿®é£¾å­ä»˜ãï¼‰ã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
    ${{ emoji: "ðŸ˜€ðŸ˜€ðŸ˜€" }}                   | ${"3æ–‡å­—ä»¥ä¸Šã®çµµæ–‡å­—ã¯ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
    ${[]}                                    | ${"ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãªã‘ã‚Œã°ãƒ‘ãƒ¼ã‚¹å¤±æ•—"}
  `("$description", ({ card }) => {
    expect(() => cardSchema.parse(card)).toThrow();
  });
});
